/*!all - v1.0-2017-04-12 */

var myApp=angular.module("app",["ngAnimate","ui.router","ngCookies","ngSanitize","articModule","codeModule","linkModule","toolModule","photoModule","mainFrameModule","myAppDirective"]);myApp.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/artic"),a.state("artic",{url:"/artic",templateUrl:"views/artic.html",controller:"articListCtrl"}).state("articdetail",{url:"/artic/:pid",Params:{pid:null},templateUrl:"views/artic_detail.html",controller:"articDetailCtrl"}).state("photo",{url:"/photo",templateUrl:"views/photo.html"}).state("photodetail",{url:"/photo/:pid",Params:{pid:null},templateUrl:"views/photo_detail.html",controller:"photoDetailCtrl"}).state("code",{url:"/code",templateUrl:"views/code.html"}).state("tool",{url:"/tool",templateUrl:"views/tool.html"}).state("link",{url:"/link",templateUrl:"views/link.html"}).state("about",{url:"/about",templateUrl:"views/about.html"})}]);var articModule=angular.module("articModule",[]);articModule.controller("articListCtrl",["$scope","$state",function(a,b){a.toDetail=function(a){b.go("articdetail",{pid:a})}}]),articModule.controller("articDetailCtrl",["$scope","$state","$stateParams","$http",function(a,b,c,d){a.goback=function(){b.go("artic")},a.show=function(){d({url:"data/artic.json",method:"GET"}).success(function(b){angular.forEach(b.artic,function(b){if(b.id===c.pid)return void(a.artic=b)})}).error(function(a){alert("获取文章详情失败！")})}()}]),articModule.controller("articLists",["$scope","$http",function(a,b){b.get("data/artic.json").then(function(b){a.data=b.data.artic,a.order="-id",a.hasactive=!0,a.pageSize=2,a.pages=Math.ceil(a.data.length/a.pageSize),a.newPages=a.pages>5?5:a.pages,a.pageList=[],a.selPage=1,a.setData=function(){a.items=a.data.slice(a.pageSize*(a.selPage-1),a.selPage*a.pageSize)},a.items=a.data.slice(0,a.pageSize);for(var c=0;c<a.newPages;c++)a.pageList.push(c+1);a.selectPage=function(b){if(!(b<1||b>a.pages)){if(b>2){for(var c=[],d=b-3;d<(b+2>a.pages?a.pages:b+2);d++)c.push(d+1);a.pageList=c}a.selPage=b,a.setData(),a.isActivePage(b),console.log("选择的页："+b)}},a.isActivePage=function(b){return a.selPage==b},a.Previous=function(){a.selectPage(a.selPage-1)},a.Next=function(){a.selectPage(a.selPage+1)}})}]);var codeModule=angular.module("codeModule",[]);codeModule.controller("codeLists",["$scope","$http",function(a,b){a.load=function(){b({url:"data/code.json",method:"GET"}).success(function(b){a.codes=b.code}).error(function(a){alert("获取失败！")})}()}]);var linkModule=angular.module("linkModule",[]);linkModule.controller("linkLists",["$scope","$http",function(a,b){a.load=function(){b({url:"data/link.json",method:"GET"}).success(function(b){a.links=b.link}).error(function(a){alert("获取失败！")})}()}]);var mainFrameModule=angular.module("mainFrameModule",[]);mainFrameModule.controller("mainframe",["$rootScope","$scope","webconfig",function(a,b,c){a.userInfo=c.userInfo,a.systemInfo=c.systemInfo,a.systemNotice=c.systemNotice,a.itemInfo=c.itemInfo,b.isSlide=!1,b.isSidebarClose=function(){b.isSlide=!b.isSlide}}]),mainFrameModule.controller("items",["$scope","$http",function(a,b){a.selected=0,a.isActives=function(b){a.selected=b},a.load=function(){b({url:"data/item.json",method:"GET"}).success(function(b){a.items=b.list}).error(function(a){alert("获取失败！")})}()}]),myApp.filter("trustHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]);var photoModule=angular.module("photoModule",[]);photoModule.controller("photoLists",["$scope","$state","$http",function(a,b,c){a.load=function(){c({url:"data/photo.json",method:"GET"}).success(function(b){a.photos=b.photo}).error(function(a){alert("获取失败！")})}(),a.showPhoto=function(a){b.go("photodetail",{pid:a})}}]),photoModule.controller("photoDetailCtrl",["$scope","$state","$stateParams","$http",function(a,b,c,d){a.goback=function(){b.go("photo")},a.show=function(){d({url:"data/photo.json",method:"GET"}).success(function(b){a.photo=b.photo[c.pid]}).error(function(a){alert("获取图片详情失败！")})}(),a.isShow=!1,a.showPic=function(b){a.current=b,a.isShow=!0},a.closePicBox=function(){a.isShow=!1,a.isplay=!1},a.getPicLen=function(){return a.photo.list.length},a.isplay=!1,a.autoPlay=function(){a.isplay=!0,a.current=0,a.isShow=!0}}]);var toolModule=angular.module("toolModule",[]);toolModule.controller("tools",["$scope","$http","$cookieStore",function(a,b,c){a.load=function(){b({url:"data/tool.json",method:"GET"}).success(function(b){a.tools=b.tool,a.len=a.tools.list.length}).error(function(a){alert("获取失败！")})}(),"undefined"==typeof c.get("toolShowCookie")&&"undefined"==typeof c.get("checkShowCookie")?(a.toolShow=!1,a.checkShow=!0):(a.toolShow=c.get("toolShowCookie"),a.checkShow=c.get("checkShowCookie")),a.checkPwd=function(){"q2651"===a.pwd?(a.pwd="",c.put("toolShowCookie",!0),c.put("checkShowCookie",!1),a.toolShow=c.get("toolShowCookie"),a.checkShow=c.get("checkShowCookie")):(alert("邀请码错误！"),a.pwd="")},a.close=function(){confirm("确认登出此工具吗？")&&(c.put("toolShowCookie",!1),c.put("checkShowCookie",!0),a.toolShow=c.get("toolShowCookie"),a.checkShow=c.get("checkShowCookie"))}}]),myApp.factory("webconfig",function(){var a={userInfo:{userName:"Zhaozj",userImg:"images/tx.jpg"},systemInfo:{copyright:"Copyright © 2016-2017 - Design by jackbuy"},systemNotice:{title:"新版网站正式上线啦！",url:"#/artic/1"},itemInfo:[{title:"日志",describe:"Life is repeating",src:"images/banner_bg.jpg"},{title:"相册",describe:"Make the site more dynamic",src:"images/banner_bg.jpg"},{title:"链接",describe:"Record important links",src:"images/banner_bg.jpg"},{title:"代码",describe:"Many a little make a mickle",src:"images/banner_bg.jpg"}]};return a});var directiveBaseUrl="views_directive/";myApp.directive("banner",function(){return{restrict:"AE",scope:{title:"@",discribe:"@",bg:"@",myMsg:"@",myMsgUrl:"@"},templateUrl:directiveBaseUrl+"banner.html",replace:!0,transclude:!0}}),myApp.directive("autoHeight",["$window",function(a){return{restrict:"AE",scope:{},controller:function(){this.toolheight=491,this.toolMtop=function(){return(a.innerHeight-this.toolheight)/2},this.checkheight=200,this.checkMtop=function(){return(a.innerHeight-this.checkheight)/2}},link:function(b,c,d){c.css({height:a.innerHeight+"px"})}}}]),myApp.directive("gotop",[function(){return{restrict:"AE",scope:{scrolltop:"@",scrollbox:"@"},templateUrl:directiveBaseUrl+"gotop.html",link:function(a,b,c){b.on("click",function(){jQuery(a.scrollbox).animate({scrollTop:0},300)}),a.scrolltop=a.scrolltop?a.scrolltop:600,jQuery(a.scrollbox).scroll(function(){var b=jQuery(a.scrollbox).scrollTop();b>a.scrolltop?jQuery(".gotop").fadeIn(100):jQuery(".gotop").fadeOut(200)})}}}]),myApp.directive("picbox",["$timeout","$interval",function(a,b){return{restrict:"AE",scope:{current:"@",isPlay:"@",picLength:"&"},link:function(a,c,d){a.main=function(a){c.find("li").css({opacity:0}),c.find("li").eq(a).css({opacity:1})},c.find(".prev").on("click",function(){a.current>0&&(a.current--,a.main(a.current))}),c.find(".next").on("click",function(){a.current<a.picLength()-1&&(a.current++,a.main(a.current))}),a.$watch("current",function(b,c){a.main(b)}),a.$watch("isPlay",function(c,d){"true"===c?a.timer=b(function(){a.current>=a.picLength()-1?(a.current=0,a.main(a.current)):a.main(a.current++)},2e3):b.cancel(a.timer)}),console.log(a.isPlay+"555")}}}]);var myAppDirective=angular.module("myAppDirective",[]);myAppDirective.directive("sideBar",function(){return{restrict:"AE",scope:{userName:"@",userImg:"@",copyright:"@",isSidebarClose:"&"},templateUrl:directiveBaseUrl+"sidebar.html"}}),myApp.directive("checkHeight",function(){return{restrict:"AE",require:"^autoHeight",scope:{},link:function(a,b,c,d){b.css({height:d.checkheight+"px",marginTop:d.checkMtop()-60+"px"})}}}),myApp.directive("toolHeight",function(){return{restrict:"AE",require:"^autoHeight",scope:{},link:function(a,b,c,d){b.css({height:d.toolheight+"px",marginTop:d.toolMtop()+"px"})}}}),myApp.directive("autoFocusInput",function(){return{restrict:"AE",scope:{},link:function(a,b,c){b[0].focus()}}}),myApp.directive("showActive",function(){return{restrict:"AE",scope:{},link:function(a,b,c){b.on("click",function(){b.addClass("active")})}}});
//# sourceMappingURL=all.min.js.map